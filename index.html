<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Diamond Nation Studios | Partnership Portal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Playfair+Display:ital,wght@0,700;1,700&family=Dancing+Script:wght@600&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%);
            min-height: 100vh;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        .paper {
            background: #ffffff;
            position: relative;
            overflow: hidden;
        }
        .watermark {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(-45deg);
            font-size: 15rem;
            font-weight: 900;
            color: rgba(30, 58, 138, 0.03);
            pointer-events: none;
            z-index: 0;
        }
        .document-text {
            line-height: 1.8;
            color: #000000;
            z-index: 10;
            position: relative;
        }
        .header-font {
            font-family: 'Playfair Display', serif;
        }
        .signature-font {
            font-family: 'Dancing Script', cursive;
        }
        .checkbox-custom:checked + label .box {
            background-color: #1e3a8a;
            border-color: #1e3a8a;
        }
        .fade-in {
            animation: fadeIn 0.8s ease-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        /* Targets the capture specifically to prevent any blur */
        .snapshot-mode {
            background: #ffffff !important;
            color: #000000 !important;
            width: 1000px !important;
            padding: 80px !important;
        }
    </style>
</head>
<body class="py-12 px-4 flex items-center justify-center">
    <div id="document-capture" class="max-w-4xl w-full paper p-8 md:p-20 shadow-2xl rounded-lg border-t-[12px] border-blue-900 fade-in">
        <div class="watermark" id="watermark-el">DNS</div>
        
        <!-- Document ID Header -->
        <div class="flex justify-between items-start mb-8 text-[10px] font-mono text-gray-500 uppercase tracking-widest">
            <div id="doc-id-display">ID: GENERATING...</div>
            <div>STATUS: OFFICIAL ORIGINAL RECORD</div>
        </div>

        <!-- Logo/Header Area -->
        <div class="flex flex-col items-center mb-12">
            <div class="w-20 h-20 bg-blue-900 rounded-full flex items-center justify-center mb-6 shadow-lg">
                <svg class="w-12 h-12 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path>
                </svg>
            </div>
            <h1 class="header-font text-4xl md:text-5xl text-black text-center font-bold">Partnership Agreement</h1>
            <p class="text-blue-800 font-bold tracking-[0.3em] uppercase text-xs mt-4">Diamond Nation Studios ‚Ä¢ Legal Department</p>
        </div>

        <!-- Document Content -->
        <div class="document-text space-y-8 text-lg mb-16 border-l-4 border-blue-900 pl-6 md:pl-10">
            <p>
                By entering a partnership with <span class="font-bold text-blue-900">Diamond Nation Studios</span>, your server agrees to meet and maintain the eligibility requirement of having at least <span class="font-bold underline decoration-blue-500 decoration-2">fifteen members</span>, unless an exception is formally approved by the Founders of Diamond Nation Studios.
            </p>
            <p>
                Upon acceptance, you are required to fully comply with all branding standards set by DNS, which includes the mandatory use of all provided logos, decals, and promotional materials exactly as delivered, without alteration or redistribution of any kind. 
            </p>
            <p>
                Additionally, your server must establish a role titled <span class="bg-blue-900 px-3 py-1 rounded font-bold text-white uppercase tracking-tighter">"Diamond Nation"</span>, designated as the highest administrative role in your server, equipped with full administrative permissions to ensure proper oversight and coordination with DNS leadership. 
            </p>
            <p>
                All logos, decals, and branding assets remain the exclusive property of Diamond Nation Studios. Misuse of assets, failure to uphold branding requirements, or refusal to maintain proper administrative structure may result in <span class="text-red-700 font-bold uppercase underline">immediate removal</span> from the program.
            </p>
            <p>
                If the partnership is terminated, you are required to remove and replace every DNS-provided asset from your server, game, and documents within <span class="font-bold underline">48 hours</span>. 
            </p>
        </div>

        <!-- Interactive Confirmations -->
        <div id="check-container" class="space-y-4 mb-12">
            <div class="flex items-start">
                <input type="checkbox" id="check1" class="hidden checkbox-custom" required>
                <label for="check1" class="flex items-start cursor-pointer group">
                    <div class="box w-6 h-6 border-2 border-black rounded mr-3 mt-1 flex-shrink-0 transition-all flex items-center justify-center bg-white">
                        <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M5 13l4 4L19 7"></path></svg>
                    </div>
                    <span class="text-sm text-black group-hover:text-blue-900 transition-colors font-bold">I confirm my server maintains at least 15 active members or has a formal exception.</span>
                </label>
            </div>
            <div class="flex items-start">
                <input type="checkbox" id="check2" class="hidden checkbox-custom" required>
                <label for="check2" class="flex items-start cursor-pointer group">
                    <div class="box w-6 h-6 border-2 border-black rounded mr-3 mt-1 flex-shrink-0 transition-all flex items-center justify-center bg-white">
                        <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M5 13l4 4L19 7"></path></svg>
                    </div>
                    <span class="text-sm text-black group-hover:text-blue-900 transition-colors font-bold">I agree to the 48-hour asset removal policy upon termination of this partnership.</span>
                </label>
            </div>
        </div>

        <!-- Signature Section -->
        <form id="signatureForm" class="bg-gray-100 p-8 rounded-xl border-2 border-gray-300">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-10">
                <div class="relative">
                    <label class="block text-[10px] font-bold text-blue-900 uppercase tracking-[0.2em] mb-4">Official Signature</label>
                    <input 
                        type="text" 
                        id="discordUsername" 
                        required
                        placeholder="Type Discord Username..."
                        class="signature-font w-full bg-transparent border-b-2 border-black focus:border-blue-900 outline-none pb-2 text-4xl text-black transition-all placeholder:text-gray-400"
                    >
                    <p class="text-[10px] text-gray-500 mt-2 uppercase tracking-tighter font-bold">Verified Digital Signature of Representative</p>
                </div>

                <div class="flex flex-col justify-end items-end">
                    <p id="currentDate" class="text-black font-black mb-4 font-mono text-sm uppercase tracking-tighter"></p>
                    <button 
                        type="submit" 
                        id="submitBtn"
                        class="w-full bg-blue-900 hover:bg-black text-white font-bold py-4 px-12 rounded-lg transition-all shadow-xl hover:-translate-y-1 active:scale-95 disabled:opacity-50"
                    >
                        EXECUTE & ARCHIVE
                    </button>
                </div>
            </div>
        </form>

        <footer class="mt-16 pt-8 border-t-2 border-black flex flex-col md:flex-row justify-between items-center text-[10px] text-black uppercase tracking-widest font-black">
            <span>&copy; <span id="year"></span> Diamond Nation Studios</span>
            <span class="mt-4 md:mt-0 font-mono" id="footer-doc-id">DOC-ID: ...</span>
        </footer>
    </div>

    <!-- Notification -->
    <div id="notification" class="fixed top-8 right-8 px-8 py-4 rounded-lg shadow-2xl text-white font-bold transform transition-all translate-x-[150%] z-50"></div>

    <script>
        const documentId = "DNS-" + Math.random().toString(36).substr(2, 4).toUpperCase() + "-" + Math.random().toString(36).substr(2, 4).toUpperCase() + "-" + Math.random().toString(36).substr(2, 4).toUpperCase();
        
        document.getElementById('doc-id-display').innerText = "ID: " + documentId;
        document.getElementById('footer-doc-id').innerText = "DOC-ID: " + documentId;

        const now = new Date();
        document.getElementById('currentDate').innerText = now.toLocaleDateString(undefined, { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });
        document.getElementById('year').innerText = now.getFullYear();

        const webhookUrl = "https://discord.com/api/webhooks/1476955076202463282/5LShV9nF7d9C2ivqkt_gFqtxv31A03OmTCkEEtBLANaK3CVXZPiW9gnc4SnHVjYUj0g8";
        
        function showNotification(message, isError = false) {
            const n = document.getElementById('notification');
            n.innerText = message;
            n.className = `fixed top-8 right-8 px-8 py-4 rounded-lg shadow-2xl text-white font-bold transform transition-all z-50 ${isError ? 'bg-red-600' : 'bg-blue-900'}`;
            n.style.transform = "translateX(0)";
            setTimeout(() => { n.style.transform = "translateX(150%)"; }, 4000);
        }

        document.getElementById('signatureForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const username = document.getElementById('discordUsername').value;
            const btn = document.getElementById('submitBtn');
            const docElement = document.getElementById('document-capture');
            
            btn.disabled = true;
            btn.innerText = "CAPTURING SOLID ARCHIVE...";

            try {
                // FIXED CAPTURE LOGIC: Scale set to 4 for HD, background forced to #FFFFFF for NO transparency
                const canvas = await html2canvas(docElement, {
                    scale: 4, 
                    useCORS: true,
                    backgroundColor: "#ffffff", // FORCES SOLID WHITE BACKGROUND
                    logging: false,
                    onclone: (clonedDoc) => {
                        const el = clonedDoc.getElementById('document-capture');
                        // Ensure the capture version is solid and opaque
                        el.style.backgroundColor = "#ffffff";
                        el.style.boxShadow = "none";
                    }
                });

                const imageBlob = await new Promise(resolve => canvas.toBlob(resolve, 'image/png', 1.0));

                btn.innerText = "UPLOADING...";

                const embedData = {
                    username: "DNS Partnership Registry",
                    avatar_url: "https://i.imgur.com/vH9ZJ49.png", 
                    content: `## üìÅ NEW PARTNERSHIP ARCHIVED\n**Signatory:** ${username}\n**ID:** \`${documentId}\``,
                    embeds: [{
                        title: "OFFICIAL SIGNED AGREEMENT",
                        color: 0, 
                        image: { url: "attachment://signature.png" },
                        footer: { text: `Verification ID: ${documentId} | DNS Legal Systems` },
                        timestamp: new Date().toISOString()
                    }]
                };

                const formData = new FormData();
                formData.append('payload_json', JSON.stringify(embedData));
                formData.append('file', imageBlob, 'signature.png');

                const response = await fetch(webhookUrl, {
                    method: 'POST',
                    body: formData
                });

                if (response.ok) {
                    showNotification("SOLID RECORD ARCHIVED");
                    document.querySelector('body').innerHTML = `
                        <div class="text-center py-20 flex flex-col items-center fade-in bg-white min-h-screen justify-center px-4">
                            <div class="w-24 h-24 bg-blue-900 text-white rounded-full flex items-center justify-center mb-8 shadow-2xl">
                                <svg class="w-12 h-12" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                            </div>
                            <h2 class="header-font text-4xl text-black mb-4 text-center font-bold">Record Secured</h2>
                            <p class="text-gray-700 max-w-md mx-auto mb-8 text-center font-mono text-sm">Official Document ID:<br><span class="text-blue-900 font-bold text-xl">${documentId}</span></p>
                            <p class="text-gray-500 text-sm mb-8 text-center">A high-contrast, non-transparent snapshot has been saved.</p>
                        </div>
                    `;
                } else { throw new Error(); }
            } catch (err) {
                console.error(err);
                showNotification("ARCHIVE ERROR", true);
                btn.disabled = false;
                btn.innerText = "EXECUTE & ARCHIVE";
            }
        });
    </script>
</body>
</html>
